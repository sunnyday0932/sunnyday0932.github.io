<!DOCTYPE html>
<html lang="zh-tw">
  <head>	
  	
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167497206-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167497206-1');
</script>
	
  	
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>	
  <meta http-equiv="content-type" content="text/html;charset=utf-8">	
  <meta http-equiv="X-UA-Compatible" content="chrome=1">	
  <meta name="viewport" content="width=device-width, initial-scale=1.0">	
  <meta name="robots" content="noodp"/>	
  <meta name="author" content="Sian">	
  <meta name="description" content="æƒ³æˆç‚ºPMçš„PG">	
  <meta name="keywords" content="Sian">	
  	
  <link rel="prev" href="https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-5nsubstitute%E4%BB%8B%E7%B4%B9/" />	
  <link rel="next" href="https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-7/" />	
  <link rel="canonical" href="https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-6/" />	
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">	
  <link rel="icon" type="image/png" sizes="32x32" href="/images/me/favicon.ico">	
  <link rel="icon" type="image/png" sizes="16x16" href="/images/me/favicon.ico">	
  <link rel="manifest" href="/images/manifest.json" crossorigin="use-credentials">	
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">	
  <meta name="msapplication-TileColor" content="#da532c">	
  <meta name="theme-color" content="#ffffff">	
  <title>	
       	
       	
           å–®å…ƒæ¸¬è©¦ - 6 | Sian	
       	
  </title>	
  <meta name="title" content="å–®å…ƒæ¸¬è©¦ - 6 | Sian">	
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">

	
  	
  
 

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/sunnyday0932.github.io"
    },
    "articleSection" : "posts",
    "name" : "å–®å…ƒæ¸¬è©¦ - 6",
    "headline" : "å–®å…ƒæ¸¬è©¦ - 6",
    "description" : "å–®å…ƒæ¸¬è©¦ - 6",
    "inLanguage" : "zh-tw",
    "author" : "Sian",
    "creator" : "Sian",
    "publisher": "Sian",
    "accountablePerson" : "Sian",
    "copyrightHolder" : "Sian",
    "copyrightYear" : "2021",
    "datePublished": "2021-02-17 20:40:45  UTC",
    "dateModified" : "2021-02-17 20:40:45  UTC",
    "url" : "https:\/\/sunnyday0932.github.io\/2021\/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-6\/",
    "wordCount" : "745",
    "keywords" : ["csharp","Unit-Test","dotnet", "Sian"]
}
</script>
	
</head>	
	
  	

  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <link rel="icon" type="image/png" href="/imgPath">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch">ğŸŒ™</a>&nbsp;<a href="https://sunnyday0932.github.io">Sian</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/recommend/" title="">Recommend</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch">ğŸŒ™</a>&nbsp;<a href="https://sunnyday0932.github.io">Sian</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/recommend/" title="">Recommend</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">å–®å…ƒæ¸¬è©¦ - 6</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://sunnyday0932.github.io" rel="author">Sian</a>  
                <span class="post-time">
                on <time datetime=2021-02-17 itemprop="datePublished">February 17, 2021</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://sunnyday0932.github.io/categories/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/"> å­¸ç¿’ç­†è¨˜ </a>
                        
                </span>
                <span id="busuanzi_container_page_pv">
                    è§€çœ‹æ¬¡æ•¸:<span id="busuanzi_value_page_pv"></span>
                </span>
        </div>
        <meta name="referrer" content="no-referrer-when-downgrade">
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <h2 id="å‰è¨€">å‰è¨€</h2>
<p>æˆ‘å€‘å·²ç¶“ä»‹ç´¹äº†åŸºæœ¬å¯«å–®å…ƒæ¸¬è©¦çš„æ–¹æ³•ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±å¯ä»¥å›é ­æ‹¿å…ˆå‰è£½ä½œçš„APIç•¶ä½œç·´ç¿’ï¼Œè£œä¸Šè©²æœ‰çš„æ¸¬è©¦ã€‚</p>
<h2 id="æœ¬æ–‡">æœ¬æ–‡</h2>
<p>é¦–å…ˆæˆ‘å€‘å»ºç«‹ä¸€å€‹æ”¾ç½®æ¸¬è©¦å°ˆæ¡ˆçš„è³‡æ–™å¤¾ã€‚</p>
<p><img src="https://i.imgur.com/Zuvt13R.jpg" alt=""></p>
<p>æ¥è‘—å»ºç«‹å®Œæ¸¬è©¦å°ˆæ¡ˆã€‚</p>
<blockquote>
<p>2021/02/21æ›´æ–°
åŸæœ¬æ˜¯åªæƒ³é–‹ä¸€å€‹æ¸¬è©¦å°ˆæ¡ˆæŠŠRepositoryè·ŸServiceçš„æ¸¬è©¦éƒ½æ”¾åœ¨ä¸€èµ·å¾Œä¾†æƒ³æƒ³ä¸å¤ªå°ã€‚
æ›´æ–°å¾Œçš„å°ˆæ¡ˆçµæ§‹å¦‚ä¸‹ã€‚</p>
</blockquote>
<p><img src="https://i.imgur.com/iknT9o0.jpg" alt=""></p>
<p>å› ç‚ºæ˜¯è¦å°Serviceå±¤é€²è¡Œæ¸¬è©¦ï¼Œè¨˜å¾—è¦åŠ å…¥å°ˆæ¡ˆåƒè€ƒã€‚<br>
<img src="https://i.imgur.com/IRx0F2t.jpg" alt=""></p>
<p>æ¥ä¸‹ä¾†å…ˆæŠŠåŸºç¤æ¸¬è©¦å°ˆæ¡ˆéœ€è¦ç”¨åˆ°çš„æ±è¥¿æº–å‚™å¥½ã€‚</p>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestClass]
    public class AccountServiceTest
    {
        private IAccountRepository _accountRepository;
        private IMapper _mapper
        {
            get
            {
                var config = new MapperConfiguration(options =&gt; { options.AddProfile&lt;ServiceProfile&gt;(); });
                return config.CreateMapper();
            }
        }

        [TestInitialize]
        public void TestInitialize()
        {
            this._accountRepository = Substitute.For&lt;IAccountRepository&gt;();
        }

        private AccountService GetSystemUnderTest()
        {
            var sut = new AccountService(this._accountRepository,this._mapper);
            return sut;
        }

        [TestMethod]
        public void TestMethod1()
        {
        }
    }
</code></pre><p>é€™é‚Šéœ€è¦ç‰¹åˆ¥æ³¨æ„çš„åœ°æ–¹åœ¨AutoMapperçš„åœ°æ–¹ï¼Œæˆ‘å€‘ä¸¦ä¸éœ€è¦è£½ä½œä¸€å€‹å‡çš„AutoMapperï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨åŸæœ¬æ–¹æ³•ã€‚</p>
<p>æ¥ä¸‹ä¾†å°±å¯ä»¥é–‹å§‹å¯«å–®å…ƒæ¸¬è©¦äº†ã€‚</p>
<h3 id="addaccountæ–°å¢å¸³è™Ÿ">AddAccount(æ–°å¢å¸³è™Ÿ)</h3>
<h4 id="1æœ‰å››å€‹å¿…å¡«æ¬„ä½éœ€è¦ç¢ºèª">1ã€æœ‰å››å€‹å¿…å¡«æ¬„ä½éœ€è¦ç¢ºèªã€‚</h4>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_Accountç‚ºç©º_æ‡‰å›å‚³Exception()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = string.Empty,
                Email = &quot;test@gmail.com&quot;,
                Password = &quot;123456&quot;,
                Phone = &quot;0917888444&quot;
            };
            //act
            Action actual = () =&gt; sut.AddAccount(info);

            //arrange
            actual.Should().Throw&lt;Exception&gt;()
                .Which.Message.Contains(&quot;è«‹æª¢æŸ¥è¼¸å…¥æ¬„ä½ï¼Œç¼ºä¸€ä¸å¯ï¼&quot;);
        }

        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_Emailç‚ºç©º_æ‡‰å›å‚³Exception()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = string.Empty,
                Password = &quot;123456&quot;,
                Phone = &quot;0917888444&quot;
            };
            //act
            Action actual = () =&gt; sut.AddAccount(info);

            //arrange
            actual.Should().Throw&lt;Exception&gt;()
                .Which.Message.Contains(&quot;è«‹æª¢æŸ¥è¼¸å…¥æ¬„ä½ï¼Œç¼ºä¸€ä¸å¯ï¼&quot;);
        }

        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_Passwordç‚ºç©º_æ‡‰å›å‚³Exception()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Password = string.Empty,
                Phone = &quot;0917888444&quot;
            };
            //act
            Action actual = () =&gt; sut.AddAccount(info);

            //arrange
            actual.Should().Throw&lt;Exception&gt;()
                .Which.Message.Contains(&quot;è«‹æª¢æŸ¥è¼¸å…¥æ¬„ä½ï¼Œç¼ºä¸€ä¸å¯ï¼&quot;);
        }

        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_Phoneç‚ºç©º_æ‡‰å›å‚³Exception()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Password = &quot;123456&quot;,
                Phone = string.Empty
            };
            //act
            Action actual = () =&gt; sut.AddAccount(info);

            //arrange
            actual.Should().Throw&lt;Exception&gt;()
                .Which.Message.Contains(&quot;è«‹æª¢æŸ¥è¼¸å…¥æ¬„ä½ï¼Œç¼ºä¸€ä¸å¯ï¼&quot;);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/1dQ5v5b.jpg" alt=""></p>
<h4 id="2ä½¿ç”¨è€…çš„å¸³è™Ÿä¸å¯ä»¥é‡è¤‡">2ã€ä½¿ç”¨è€…çš„å¸³è™Ÿä¸å¯ä»¥é‡è¤‡ã€‚</h4>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_ä½¿ç”¨è€…å¸³è™Ÿé‡è¤‡_æ‡‰å›å‚³éŒ¯èª¤è¨Šæ¯()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Password = &quot;123456&quot;,
                Phone = &quot;0917888111&quot;
            };

            var data = new AccountDataModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Phone = &quot;0917888111&quot;
            };

            var expect = new ResultDto
            {
                Success = false,
                Message = &quot;è©²ä½¿ç”¨è€…å¸³è™Ÿå·²å­˜åœ¨ï¼Œè«‹ç¢ºèªï¼&quot;
            };

            this._accountRepository.GetAccount(Arg.Any&lt;string&gt;()).Returns(data);

            //act
            var actual = sut.AddAccount(info);

            //arrange
            actual.Should().BeEquivalentTo(expect);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/1YwFcd6.jpg" alt=""></p>
<h4 id="3å¯†ç¢¼é•·åº¦ä¸å¯ä½æ–¼6ç¢¼">3ã€å¯†ç¢¼é•·åº¦ä¸å¯ä½æ–¼6ç¢¼ã€‚</h4>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_å¯†ç¢¼é•·åº¦ä½æ–¼6ç¢¼_æ‡‰å›å‚³éŒ¯èª¤è¨Šæ¯()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Password = &quot;1234&quot;,
                Phone = &quot;0917888111&quot;
            };

            var expect = new ResultDto
            {
                Success = false,
                Message = &quot;ä½¿ç”¨è€…å¯†ç¢¼é•·åº¦ä¸å¯ä½æ–¼6ç¢¼ï¼&quot;
            };

            //act
            var actual = sut.AddAccount(info);

            //arrange
            actual.Should().BeEquivalentTo(expect);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/U8PWSHv.jpg" alt=""></p>
<h3 id="4å¯†ç¢¼éœ€é€éåŠ å¯†è™•ç†å­˜å…¥è³‡æ–™åº«">4ã€å¯†ç¢¼éœ€é€éåŠ å¯†è™•ç†å­˜å…¥è³‡æ–™åº«ã€‚</h3>
<p>é€™é‚Šæ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ConverPasswordé€™å€‹Functionæ˜¯Privateï¼Œä¸€èˆ¬ä¾†èªªæˆ‘å€‘ä¸¦ä¸æœƒç‰¹åˆ¥é‡å°Private Functionåšæ¸¬è©¦ï¼Œç†ç”±æ˜¯ä¸€å€‹Private Functionä¸€å®šæœƒåœ¨æŸå€‹Public Functionè¢«åŸ·è¡Œã€‚</p>
<p>ç•¶ç„¶è¦å°Private Function é€²è¡Œæ¸¬è©¦ä¹Ÿä¸æ˜¯ä¸è¡Œçš„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ã€‚</p>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;ConverPassword&quot;)]
        public void ConverPassword_è¼¸å…¥å¯†ç¢¼_æ‡‰å›å‚³åŠ å¯†çµæœ()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var method = sut.GetType().GetMethod(&quot;ConverPassword&quot;, BindingFlags.Instance | BindingFlags.NonPublic);
            var expect = &quot;9GYVaHLoOg+y+V/HHwKtkzBH3y8XWn14h8ifWPYViLc=&quot;;

            //act
            var actual = method.Invoke(sut, new[] { &quot;test2&quot;, &quot;12371324&quot; });

            //arrange
            actual.Should().Be(expect);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/D7hDhPL.jpg" alt=""></p>
<p>é€™é‚Šç‰¹åˆ¥æé†’ä¸€ä¸‹ï¼Œ.NET Coreä¼¼ä¹å·²ç¶“æ²’æœ‰<a href="https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/ms245564(v=vs.120)?redirectedfrom=MSDN">Private Object</a>é€™å€‹Classäº†ï¼Œæ‰€ä»¥å¦å°‹å‡ºå…¥æ‰¾äº†é€™å€‹æ–¹æ³•ã€‚</p>
<p><a href="https://stackoverflow.com/questions/59678504/how-to-unit-test-private-method-in-net-core-application-which-does-not-support">å¯ä»¥åƒè€ƒé€™é‚Šçš„è³‡æ–™</a>ã€‚</p>
<blockquote>
<p>021/02/21æ›´æ–°
ç™¼ç¾å…¬å¸å¤§ç¥æä¾›äº†å¦ä¸€å€‹æ–¹æ³•ï¼Œé‚„ä¸è¶•å¿«æ›´æ–°ä¸€ä¸‹ã€‚</p>
</blockquote>
<p>å› ç‚ºPrivateåªèƒ½é€éä¸Šé¢é‚£ç¨®æ–¹å¼æ¸¬è©¦ï¼Œä½†å¦‚æœæ˜¯Internalé‚£å°±æœ‰ä¸åŒåšæ³•äº†ã€‚<br>
é¦–å…ˆæˆ‘å€‘è©¦è‘—æŠŠConverPasswordé€™å€‹functionæ”¹æˆInternalã€‚<br>
<img src="https://i.imgur.com/zZnIJks.jpg" alt=""></p>
<p>æ¥è‘—éœ€è¦å®‰è£Meziantou.MSBuild.InternalsVisibleToé€™å€‹Nugetå¥—ä»¶ã€‚<br>
<img src="https://i.imgur.com/RWf4suw.jpg" alt=""></p>
<p>è«‹æ³¨æ„é€™é‚Šå®‰è£çš„æ˜¯ç›®æ¨™å°ˆæ¡ˆï¼Œä¸¦ä¸æ˜¯æ¸¬è©¦å°ˆæ¡ˆå–”!!!<br>
<a href="https://github.com/meziantou/Meziantou.MSBuild.InternalsVisibleTo">æ­¤å¥—ä»¶çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥åƒç…§é€™å€‹åœ°æ–¹ã€‚  </a></p>
<p>å®‰è£å®Œå¾Œè¦åˆ°Serviceçš„csprojæª”æ–°å¢ä»¥ä¸‹è¨­å®šã€‚</p>
<p><img src="https://i.imgur.com/Fm7sPHV.jpg" alt=""></p>
<p>å°å°ˆæ¡ˆå·¦éµé»æ“Šå…©ä¸‹å³å¯é€²å…¥csprojã€‚</p>
<pre><code class="language-csharp=" data-lang="csharp=">&lt;ItemGroup&gt;
  &lt;InternalsVisibleTo Include=&quot;$(AssemblyName)Tests&quot;/&gt; 
  //å°ˆæ¡ˆåç¨±æœ‰Testsçµå°¾çš„éƒ½å¯ä»¥çœ‹åˆ°Internal
&lt;/ItemGroup&gt;
</code></pre><p><img src="https://i.imgur.com/Fq3lUga.jpg" alt=""></p>
<p>æ¥ä¸‹ä¾†åˆ°æˆ‘å€‘çš„æ¸¬è©¦å°ˆæ¡ˆåŸæœ¬æ¸¬è©¦Private functionçš„åœ°æ–¹ã€‚<br>
<img src="https://i.imgur.com/p1c1PfZ.jpg" alt=""></p>
<p>ä¿®æ”¹ä¸€ä¸‹å¯«æ³•ã€‚</p>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;ConverPassword&quot;)]
        public void ConverPassword_è¼¸å…¥å¯†ç¢¼_æ‡‰å›å‚³åŠ å¯†çµæœ()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var expect = &quot;9GYVaHLoOg+y+V/HHwKtkzBH3y8XWn14h8ifWPYViLc=&quot;;

            //act
            var actual = sut.ConverPassword(&quot;test2&quot;, &quot;12371324&quot; );

            //arrange
            actual.Should().Be(expect);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/LUBH685.jpg" alt=""></p>
<h3 id="æª¢æŸ¥ä¿¡ç®±æ˜¯å¦åˆæ³•">æª¢æŸ¥ä¿¡ç®±æ˜¯å¦åˆæ³•ã€‚</h3>
<p>åŒä¸Šä¸€æ¨£å¯ä»¥é€éä»¥ä¸‹æ–¹å¼ç¢ºèªé€™å€‹Functionæ˜¯å¦æ­£ç¢ºã€‚</p>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;CheckMailFormate&quot;)]
        public void CheckMailFormate_è¼¸å…¥éŒ¯èª¤æ ¼å¼Mail_æ‡‰å›å‚³False()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var method = sut.GetType().GetMethod(&quot;CheckMailFormate&quot;, BindingFlags.Instance | BindingFlags.NonPublic);

            //act
            var actual = method.Invoke(sut, new[] { &quot;fff#gmail.com&quot;});

            //arrange
            actual.Should().Be(false);
        }
        
        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;CheckMailFormate&quot;)]
        public void CheckMailFormate_è¼¸å…¥æ­£ç¢ºæ ¼å¼Mail_æ‡‰å›å‚³True()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var method = sut.GetType().GetMethod(&quot;CheckMailFormate&quot;, BindingFlags.Instance | BindingFlags.NonPublic);

            //act
            var actual = method.Invoke(sut, new[] { &quot;fff@gmail.com&quot; });

            //arrange
            actual.Should().Be(true);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/Ih4PdPM.jpg" alt=""></p>
<p><img src="https://i.imgur.com/2gCgrDq.jpg" alt=""></p>
<p>æ¥ä¸‹ä¾†åˆ¥å¿˜äº†è¦å›å»æ¸¬è©¦æˆ‘å€‘æª¢æŸ¥ä¿¡ç®±å¾Œå›å‚³çš„è¨Šæ¯ã€‚</p>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_è¼¸å…¥ä¿¡ç®±æ ¼å¼éƒ¨æ­£ç¢º_æ‡‰å›å‚³éŒ¯èª¤è¨Šæ¯()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test#gmail.com&quot;,
                Password = &quot;1234567&quot;,
                Phone = &quot;0917888111&quot;
            };

            var expect = new ResultDto
            {
                Success = false,
                Message = &quot;è«‹ç¢ºèªä¿¡ç®±æ ¼å¼ï¼&quot;
            };

            //act
            var actual = sut.AddAccount(info);

            //arrange
            actual.Should().BeEquivalentTo(expect);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/KGtgYcT.jpg" alt=""></p>
<h3 id="æ–°å¢çµæœ">æ–°å¢çµæœã€‚</h3>
<pre><code class="language-csharp=" data-lang="csharp=">        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_æ–°å¢æˆåŠŸ_æ‡‰å›å‚³æ­£ç¢ºè¨Šæ¯()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Password = &quot;1234567&quot;,
                Phone = &quot;0917888111&quot;
            };

            this._accountRepository.AddAccount(Arg.Any&lt;AccountCondition&gt;()).Returns(true);

            var expect = new ResultDto
            {
                Success = true,
                Message = &quot;æ–°å¢æˆåŠŸ&quot;
            };

            //act
            var actual = sut.AddAccount(info);

            //arrange
            actual.Should().BeEquivalentTo(expect);
        }
        
        [TestMethod]
        [Owner(&quot;Sian&quot;)]
        [TestCategory(&quot;AccountServiceTest&quot;)]
        [TestProperty(&quot;AccountServiceTest&quot;, &quot;AddAccount&quot;)]
        public void AddAccount_æ–°å¢å¤±æ•—_æ‡‰å›å‚³éŒ¯èª¤è¨Šæ¯()
        {
            //assert
            var sut = this.GetSystemUnderTest();
            var info = new AccountInfoModel
            {
                Account = &quot;test&quot;,
                Email = &quot;test@gmail.com&quot;,
                Password = &quot;1234567&quot;,
                Phone = &quot;0917888111&quot;
            };

            this._accountRepository.AddAccount(Arg.Any&lt;AccountCondition&gt;()).Returns(false);

            var expect = new ResultDto
            {
                Success = false,
                Message = &quot;æ–°å¢å¤±æ•—&quot;
            };

            //act
            var actual = sut.AddAccount(info);

            //arrange
            actual.Should().BeEquivalentTo(expect);
        }
</code></pre><p>çµæœ:<br>
<img src="https://i.imgur.com/WcxQBZK.jpg" alt=""></p>
<p><img src="https://i.imgur.com/YvHSuYa.jpg" alt=""></p>
<h2 id="å¾Œè¨˜">å¾Œè¨˜</h2>
<p>é€™æ¨£æˆ‘å€‘ç¬¬ä¸€å€‹åŠŸèƒ½æ–°å¢å¸³è™Ÿçš„Serviceéƒ¨åˆ†å°±å®Œæˆäº†ï¼Œæ¥ä¸‹ä¾†å¾ŒçºŒç¤ºç¯„å°±æœƒåŠ ç·Šè…³æ­¥ï¼Œæ¯”è¼ƒç‰¹æ®Šåœ°æ–¹æ‰æœƒæ‹¿å‡ºä¾†è¬›è§£ã€‚</p>
<p><a href="https://github.com/sunnyday0932/WebApiPhase2">ä»¥ä¸Šç¤ºç¯„ä¸€æ¨£æœƒåŒæ­¥æ”¾åœ¨GitHubæœ‰éœ€è¦è§€çœ‹æ­¡è¿å–ç”¨ã€‚</a></p>
<h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™</h2>
<ul>
<li>1ã€<a href="https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/ms245564(v=vs.120)?redirectedfrom=MSDN">PrivateObject Class</a>ã€‚</li>
<li>2ã€<a href="https://blog.yowko.com/unit-test-private-method/">Unit Test æƒ³é©—è­‰ private method è©²æ€éº¼åš</a>ã€‚</li>
<li>3ã€<a href="https://stackoverflow.com/questions/59678504/how-to-unit-test-private-method-in-net-core-application-which-does-not-support">How to unit test private method in .Net Core application which does not support â€œPrivateObjectâ€</a>ã€‚</li>
<li>4ã€<a href="https://stackoverflow.com/questions/41462468/net-core-library-how-to-test-private-methods-using-xunit?rq=1">.Net core library: How to test private methods using xUnit</a></li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Sian </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-6/>https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-6/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡æ¡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è­˜å…±äº«ç½²å-éå•†æ¥­æ€§ä½¿ç”¨ 4.0 åœ‹éš›è¨±å¯å”è­°</a>é€²è¡Œè¨±å¯
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://sunnyday0932.github.io/tags/csharp/">
                    #csharp</a></span>
            
            <span class="tag"><a href="https://sunnyday0932.github.io/tags/unit-test/">
                    #Unit-Test</a></span>
            
            <span class="tag"><a href="https://sunnyday0932.github.io/tags/dotnet/">
                    #dotnet</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://sunnyday0932.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-5nsubstitute%E4%BB%8B%E7%B4%B9/" class="prev" rel="prev" title="å–®å…ƒæ¸¬è©¦ - 5(NSubstituteä»‹ç´¹)"><i class="iconfont icon-left"></i>&nbsp;å–®å…ƒæ¸¬è©¦ - 5(NSubstituteä»‹ç´¹)</a>
         
        
        <a href="https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-7/" class="next" rel="next" title="å–®å…ƒæ¸¬è©¦ - 7">å–®å…ƒæ¸¬è©¦ - 7&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
                     <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Sian" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                 
          
    </div>

    
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2020 - 2021</span>
        
        <span class="with-love">
    	 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://sunnyday0932.github.io">Sian</a> | </span> 
         

         
        <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
        <span id="busuanzi_container_site_pv">
            ç¸½ç€è¦½<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
